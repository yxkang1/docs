import{useLocaleConfig as k,entries as $,endsWith as G,isPlainObject as w,isString as A,ensureLeadingSlash as D,ensureEndingSlash as E,startsWith as C,keys as O,isNumber as v,hasGlobalComponent as R}from"@vuepress/helper/client";import{usePageData as j,useRoutes as B,useSiteData as H,RouteLink as d,defineClientConfig as I}from"vuepress/client";import{defineComponent as N,shallowRef as P,computed as W,h as e}from"vue";import"./styles/catalog.css";import{useCatalogInfoGetter as T,injectCatalogInfoGetter as q}from"./index.js";import"./styles/vars.css";var z=N({name:"Catalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean,hideHeading:Boolean},setup(l){const x=T(),m=k(__CATALOG_LOCALES__),L=j(),y=B(),S=H(),_=P($(y.value).map(([t,{meta:p}])=>{const o=x(p);if(!o)return null;const n=t.split("/").length;return{level:G(t,"/")?n-2:n-1,base:t.replace(/\/[^/]+\/?$/,"/"),path:t,...o}}).filter(t=>w(t)&&A(t.title))),u=W(()=>{const t=l.base?D(E(l.base)):L.value.path.replace(/\/[^/]+$/,"/"),p=t.split("/").length-2,o=[];return _.value.filter(({level:n,path:s})=>{if(!C(s,t)||s===t)return!1;if(t==="/"){const i=O(S.value.locales).filter(a=>a!=="/");if(s==="/404.html"||i.some(a=>C(s,a)))return!1}return n-p<=l.level}).sort(({title:n,level:s,order:i},{title:a,level:c,order:r})=>s-c||(v(i)?v(r)?i>0?r>0?i-r:-1:r<0?i-r:1:i:v(r)?r:n.localeCompare(a))).forEach(n=>{const{base:s,level:i}=n;switch(i-p){case 1:{o.push(n);break}case 2:{const a=o.find(c=>c.path===s);a&&(a.children??=[]).push(n);break}default:{const a=o.find(c=>c.path===s.replace(/\/[^/]+\/$/,"/"));if(a){const c=a.children?.find(r=>r.path===s);c&&(c.children??=[]).push(n)}}}}),o});return()=>{const t=u.value.some(p=>p.children);return e("div",{class:["vp-catalog",{index:l.index}]},[l.hideHeading?null:e("h2",{class:"vp-catalog-main-title"},m.value.title),u.value.length?e(l.index?"ol":"ul",{class:["vp-catalog-list",{deep:t}]},u.value.map(({children:p=[],title:o,path:n,content:s})=>{const i=e(d,{class:"vp-catalog-title",to:n},()=>s?e(s):o);return e("li",{class:"vp-catalog-item"},t?[e("h3",{id:o,class:["vp-catalog-child-title",{"has-children":p.length}]},[e("a",{href:`#${o}`,class:"vp-catalog-header-anchor","aria-hidden":!0},"#"),i]),p.length?e(l.index?"ol":"ul",{class:"vp-child-catalogs"},p.map(({children:a=[],content:c,path:r,title:g})=>e("li",{class:"vp-child-catalog"},[e("div",{class:["vp-catalog-sub-title",{"has-children":a.length}]},[e("a",{href:`#${g}`,class:"vp-catalog-header-anchor"},"#"),e(d,{class:"vp-catalog-title",to:r},()=>c?e(c):g)]),a.length?e(l.index?"ol":"div",{class:l.index?"vp-sub-catalogs":"vp-sub-catalogs-wrapper"},a.map(({content:h,path:f,title:b})=>l.index?e("li",{class:"vp-sub-catalog"},e(d,{to:f},()=>h?e(h):b)):e(d,{class:"vp-sub-catalog-link",to:f},()=>h?e(h):b))):null]))):null]:e("div",{class:"vp-catalog-child-title"},i))})):e("p",{class:"vp-empty-catalog"},m.value.empty)])}}}),F=I({enhance:({app:l})=>{q(l),R("Catalog",l)||l.component("Catalog",z)}});export{F as default};
//# sourceMappingURL=config.js.map
