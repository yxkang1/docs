import{useLocaleConfig as S,wait as L}from"@vuepress/helper/client";import{useMediaQuery as x,useClipboard as A,useEventListener as C}from"@vueuse/core";import{computed as _,watch as k,nextTick as M}from"vue";import{usePageData as T}from"vuepress/client";import"./styles/copy-code.css";import"./styles/vars.css";const j=/language-(shellscript|shell|bash|sh|zsh)/,q=({delay:p=500,duration:i=2e3,locales:d,selector:m,showInMobile:y,ignoreSelector:l=[],transform:r})=>{if(__VUEPRESS_SSR__)return;const b=x("(max-width: 419px)"),c=_(()=>!b.value||y),u=S(d),g=T(),f=o=>{if(o.hasAttribute("copy-code"))return;const e=document.createElement("button");e.type="button",e.classList.add("vp-copy-code-button"),e.setAttribute("aria-label",u.value.copy),e.setAttribute("data-copied",u.value.copied),o.parentElement?.insertBefore(e,o),o.setAttribute("copy-code","")};k(()=>[g.value.path,c.value],async()=>{document.body.classList.toggle("no-copy-code",!c.value),c.value&&(await M(),await L(p),document.querySelectorAll(m.join(",")).forEach(f))},{immediate:!0});const{copy:v}=A({legacy:!0}),s=new WeakMap,h=async(o,e,t)=>{const a=e.cloneNode(!0);l.length&&a.querySelectorAll(l.join(",")).forEach(w=>{w.remove()}),r&&r(a);let n=a.textContent||"";if(j.test(o.className)&&(n=n.replace(/^ *(\$|>) /gm,"")),await v(n),i<=0)return;t.classList.add("copied"),clearTimeout(s.get(t));const E=setTimeout(()=>{t.classList.remove("copied"),t.blur(),s.delete(t)},i);s.set(t,E)};C("click",o=>{const e=o.target;if(c.value&&e.matches('div[class*="language-"] > button.vp-copy-code-button')){const t=e.parentElement,a=e.nextElementSibling;if(!t||!a)return;h(t,a,e)}})};export{q as u};
//# sourceMappingURL=useCopyCode-COIUvdSg.js.map
