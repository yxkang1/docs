import{useLocaleConfig as D,isPlainObject as S,isString as $,removeEndingSlash as x,isLinkHttp as k}from"@vuepress/helper/client";import{useEventListener as E}from"@vueuse/core";import{computed as l,onMounted as w,watchEffect as A}from"vue";import{usePageFrontmatter as P,usePageData as R}from"vuepress/client";const j=(a,h)=>{const d=D(h),o=P(),n=R(),p=l(()=>!!o.value.copy||o.value.copy!==!1&&a.global),r=l(()=>S(o.value.copy)?o.value.copy:null),m=l(()=>r.value?.disableCopy??a.disableCopy??!1),f=l(()=>p.value?r.value?.disableSelection??a.disableSelection??!1:!1),g=l(()=>p.value?r.value?.maxLength??a.maxLength??0:0),y=l(()=>r.value?.triggerLength??a.triggerLength??100),v=e=>e?`${x(k(e)?e:`https://${e}`)}${n.value.path}`:window.location.href,b=(e,t)=>{const{author:s,license:i,link:c}=d.value;return[e?s.replace(":author",e):"",t?i.replace(":license",t):"",c.replace(":link",v(a.canonical))].filter(u=>u).join(`
`)},C=()=>{if($(n.value.copyright))return n.value.copyright.replace(":link",v());const{author:e,license:t}=n.value.copyright??{};return b(e??a.author,t??a.license)},L=e=>{const t=getSelection();if(t){const s=t.getRangeAt(0);if(p.value){const i=s.toString().length;if(m.value||g.value&&i>g.value){e.preventDefault();return}if(i>=y.value){e.preventDefault();const c=C(),u=document.createElement("div");u.appendChild(t.getRangeAt(0).cloneContents()),e.clipboardData&&(e.clipboardData.setData("text/html",`${u.innerHTML}<hr><div class="copyright">${c.replace(/\\n/g,"<br>")}</div>`),e.clipboardData.setData("text/plain",`${t.getRangeAt(0).cloneContents().textContent||""}
------
${c}`))}}}};w(()=>{const e=document.querySelector("#app");E(e,"copy",L),A(()=>{e.style.userSelect=f.value?"none":"auto"})})};export{j as setupCopyright};
//# sourceMappingURL=index.js.map
