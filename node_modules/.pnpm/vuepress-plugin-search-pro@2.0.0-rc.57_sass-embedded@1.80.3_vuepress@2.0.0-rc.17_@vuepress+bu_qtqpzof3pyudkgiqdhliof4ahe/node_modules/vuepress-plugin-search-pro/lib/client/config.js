import{usePageData as U,useRouteLocale as j,useSiteLocaleData as H,defineClientConfig as W}from"vuepress/client";import{startsWith as F,useLocaleConfig as f}from"@vuepress/helper/client";import{useEventListener as M,useDebounceFn as R,useScrollLock as Y,onClickOutside as B}from"@vueuse/core";import{ref as d,computed as L,watch as k,provide as $,onMounted as y,onUnmounted as T,defineComponent as A,inject as _,h as a,shallowRef as D,nextTick as V,defineAsyncComponent as q}from"vue";import{checkIsMacOS as z,checkIsIOS as Q,checkIsiPad as X,useIsMobile as G}from"vuepress-shared/client";import{c as I,C as J,S as Z}from"./closeIcon-KyBc4d64.js";import{d as O,e as x,u as K,c as ee,a as C,s as N,i as ae}from"./index-80hxQaHi.js";import"./styles/search-box.scss";import"./styles/search-modal.scss";const te=(e,c=!1)=>{const r=d(0),s=L(()=>e.value[r.value]),o=()=>{r.value=r.value>0?r.value-1:e.value.length-1},l=()=>{r.value=r.value<e.value.length-1?r.value+1:0};return k(e,()=>{c||(r.value=0)}),{index:r,item:s,prev:o,next:l}},oe=e=>e instanceof Element?document.activeElement===e&&(["TEXTAREA","SELECT","INPUT"].includes(e.tagName)||e.hasAttribute("contenteditable")):!1,le=e=>O.some(c=>{const{key:r,ctrl:s=!1,shift:o=!1,alt:l=!1,meta:h=!1}=c;return r===e.key&&s===e.ctrlKey&&o===e.shiftKey&&l===e.altKey&&h===e.metaKey}),re='<svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"></path></g></svg>',se='<svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8M10.5 8.5l-3 3-3-3"></path></g></svg>',ne='<svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8M10.5 6.5l-3-3-3 3"></path></g></svg>',ce='<svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"></path></g></svg>',b=Symbol(__VUEPRESS_DEV__?"search-pro":""),ue=()=>{const e=d(!1);$(b,e)},ie=e=>{const c=d([]);if(x){const r=K(),s=U(),o=j();y(()=>{const{suggest:l,terminate:h}=ee(),p=u=>{const i=u.join(" "),{searchFilter:w,splitWord:E,suggestionsFilter:g=n=>n,...m}=r.value;i?l(i,o.value,m).then(n=>g(n,i,o.value,s.value)).then(n=>{c.value=n.length?F(n[0],i)&&!n[0].slice(i.length).includes(" ")?n:[i,...n]:[]}).catch(n=>{console.warn(n)}):c.value=[]};k([e,o],([u])=>p(u),{immediate:!0}),T(()=>{h()})})}return{suggestions:c}},S=O[0];var ve=A({name:"SearchBox",setup(){const e=f(C),c=_(b),r=d(!1),s=L(()=>S?[(r.value?["⌃","⇧","⌥","⌘"]:["Ctrl","Shift","Alt","Win"]).filter((o,l)=>S[["ctrl","shift","alt","meta"][l]]),S.key.toUpperCase()]:null);return M("keydown",o=>{!c.value&&le(o)&&!oe(o.target)&&(o.preventDefault(),c.value=!0)}),y(()=>{const{userAgent:o}=navigator;r.value=z(o)||Q(o)||X(o)}),()=>[a("button",{type:"button",class:"search-pro-button","aria-label":e.value.search,onClick:()=>{c.value=!0}},[a(I),a("div",{class:"search-pro-placeholder"},e.value.search),s.value?a("div",{class:"search-pro-key-hints"},s.value.map(o=>a("kbd",{class:"search-pro-key"},o))):null])]}});const he=q({loader:()=>import("./components/SearchResult.js"),loadingComponent:()=>{const e=f(C);return a(Z,{hint:e.value.loading})}});var pe=A({name:"SearchModal",setup(){const e=_(b),c=H(),r=G(),s=f(C),o=K(),l=d(""),h=d([]),{suggestions:p}=ie(h),u=d(!1),{index:i,prev:w,next:E}=te(p),g=D(),m=D(),n=(t=i.value)=>{l.value=p.value[t],u.value=!1};M("keydown",t=>{u.value?t.key==="ArrowUp"?w():t.key==="ArrowDown"?E():t.key==="Enter"?n():t.key==="Escape"&&(u.value=!1):t.key==="Escape"&&(e.value=!1)});const P=R(()=>{(o.value.splitWord?.(l.value)??Promise.resolve(l.value.split(" "))).then(t=>{h.value=t})},Math.min(N.searchDelay,N.suggestDelay));return k(l,P,{immediate:!0}),y(()=>{const t=Y(document.body);k(e,async v=>{t.value=v,v&&(await V(),g.value?.focus())}),B(m,()=>{u.value=!1}),T(()=>{t.value=!1})}),()=>e.value?a("div",{class:"search-pro-modal-wrapper"},[a("div",{class:"search-pro-mask",onClick:()=>{e.value=!1,l.value=""}}),a("div",{class:"search-pro-modal"},[a("div",{class:"search-pro-box"},[a("form",[a("label",{for:"search-pro","aria-label":s.value.search},a(I)),a("input",{ref:g,type:"search",class:"search-pro-input",id:"search-pro",placeholder:s.value.placeholder,spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off",name:`${c.value.title}-search`,value:l.value,"aria-controls":"search-pro-results",onKeydown:t=>{const{key:v}=t;p.value.length&&(v==="Tab"?(n(),t.preventDefault()):(v==="ArrowDown"||v==="ArrowUp"||v==="Escape")&&t.preventDefault())},onInput:({target:t})=>{l.value=t.value,u.value=!0,i.value=0}}),l.value?a("button",{type:"reset",class:"search-pro-clear-button",innerHTML:J,onClick:()=>{l.value=""}}):null,x&&u.value&&p.value.length?a("ul",{class:"search-pro-suggestions",ref:m},p.value.map((t,v)=>a("li",{class:["search-pro-suggestion",{active:v===i.value}],onClick:()=>{n(v)}},[a("kbd",{class:"search-pro-auto-complete",title:`Tab ${s.value.autocomplete}`},"Tab"),t]))):null]),a("button",{type:"button",class:"search-pro-close-button",onClick:()=>{e.value=!1,l.value=""}},s.value.cancel)]),a(he,{queries:h.value,isFocusing:!u.value,onClose:()=>{e.value=!1},onUpdateQuery:t=>{l.value=t}}),r.value?null:a("div",{class:"search-pro-hints"},[a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:re}),s.value.select]),a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:ne}),a("kbd",{innerHTML:se}),s.value.navigate]),a("span",{class:"search-pro-hint"},[a("kbd",{innerHTML:ce}),s.value.exit])])])]):null}}),de=W({enhance({app:e}){ae(e),e.component("SearchBox",ve)},setup(){ue()},rootComponents:[pe]});export{de as default};
//# sourceMappingURL=config.js.map
