{"version":3,"file":"useRedirectInfo-Bi8syic3.js","sources":["../../src/client/utils/storage.ts","../../src/client/composables/useRedirectInfo.ts"],"sourcesContent":["import { useLocalStorage, useSessionStorage } from '@vueuse/core'\n\nconst REDIRECT_STORAGE_KEY = 'VUEPRESS_REDIRECT_STATUS'\n\nexport const statusLocalStorage = useLocalStorage<Record<string, boolean>>(\n  REDIRECT_STORAGE_KEY,\n  {},\n)\n\nexport const statusSessionStorage = useSessionStorage<Record<string, boolean>>(\n  REDIRECT_STORAGE_KEY,\n  {},\n)\n","import { entries } from '@vuepress/helper/client'\nimport { usePreferredLanguages } from '@vueuse/core'\nimport type { ComputedRef } from 'vue'\nimport { computed } from 'vue'\nimport { useRouteLocale } from 'vuepress/client'\nimport type { RedirectBehaviorConfig } from '../../shared/index.js'\n\nexport interface RedirectInfo {\n  lang: string\n  localePath: string\n}\n\nexport const useRedirectInfo = (\n  behaviorConfig: RedirectBehaviorConfig,\n): ComputedRef<RedirectInfo | null> => {\n  const languages = usePreferredLanguages()\n  const routeLocale = useRouteLocale()\n\n  const localeEntries = entries(behaviorConfig.config)\n\n  return computed(() => {\n    if (localeEntries.some(([key]) => routeLocale.value === key))\n      for (const language of languages.value)\n        for (const [localePath, langs] of localeEntries)\n          if (langs.includes(language)) {\n            if (localePath === routeLocale.value) return null\n\n            return {\n              lang: language,\n              localePath,\n            }\n          }\n\n    return null\n  })\n}\n"],"names":["REDIRECT_STORAGE_KEY","statusLocalStorage","useLocalStorage","statusSessionStorage","useSessionStorage","useRedirectInfo","behaviorConfig","languages","usePreferredLanguages","routeLocale","useRouteLocale","localeEntries","entries","computed","key","language","localePath","langs"],"mappings":"mOAEA,MAAMA,EAAuB,2BAEhBC,EAAqBC,EAChCF,EACA,CACF,CAAA,EAEaG,EAAuBC,EAClCJ,EACA,CACF,CAAA,ECAaK,EACXC,GACqC,CACrC,MAAMC,EAAYC,EAAAA,EACZC,EAAcC,EAEdC,EAAAA,EAAgBC,EAAQN,EAAe,MAAM,EAEnD,OAAOO,EAAS,IAAM,CACpB,GAAIF,EAAc,KAAK,CAAC,CAACG,CAAG,IAAML,EAAY,QAAUK,CAAG,GACzD,UAAWC,KAAYR,EAAU,MAC/B,SAAW,CAACS,EAAYC,CAAK,IAAKN,EAChC,GAAIM,EAAM,SAASF,CAAQ,EACzB,OAAIC,IAAeP,EAAY,MAAc,KAEtC,CACL,KAAMM,EACN,WAAAC,CACF,EAGR,OAAO,IACT,CAAC,CACH"}