import{useScrollLock as y}from"@vueuse/core";import{defineComponent as k,ref as p,computed as g,watch as w,onMounted as R,nextTick as j,onBeforeUnmount as C,h as e,TransitionGroup as S}from"vue";import{useRouter as x,useRoutePath as L,useRouteLocale as M}from"vuepress/client";import"../styles/redirect-modal.css";import{u as P,s as v,a as h}from"../useRedirectInfo-Bi8syic3.js";import"@vuepress/helper/client";var $=k({name:"RedirectModal",props:{config:{type:Object,required:!0},locales:{type:Object,required:!0}},setup(n){const b=x(),s=L(),l=M(),r=P(n.config),m=p(),t=y(m),o=p(!1),u=g(()=>{if(!r.value)return null;const{lang:c,localePath:f}=r.value,i=[n.locales[f],n.locales[l.value]];return{hint:i.map(({hint:a})=>a.replace("$1",c)),switch:i.map(({switch:a})=>a.replace("$1",c)).join(" / "),cancel:i.map(({cancel:a})=>a).join(" / "),remember:i.map(({remember:a})=>a).join(" / ")}}),d=()=>{v.value[l.value]=!0,o.value&&(h.value[l.value]=!0),t.value=!1};return w(s,()=>{t.value=!1}),R(async()=>{m.value=document.body,await j(),r.value&&!v.value[l.value]&&!h.value[l.value]&&(t.value=!0)}),C(()=>{t.value=!1}),()=>e(S,{name:"redirect-modal-fade"},()=>t.value?e("div",{key:"mask",class:"redirect-modal-mask"},e("div",{key:"popup",class:"redirect-modal-wrapper"},[e("div",{class:"redirect-modal-content"},u.value?.hint.map(c=>e("p",c))),e("div",{class:"redirect-modal-hint"},[e("input",{id:"remember-redirect",type:"checkbox",value:o.value,onChange:()=>{o.value=!o.value}}),e("label",{for:"remember-redirect"},u.value?.remember)]),e("button",{type:"button",class:"redirect-modal-action primary",onClick:()=>{d(),b.replace(s.value.replace(l.value,r.value.localePath))}},u.value?.switch),e("button",{type:"button",class:"redirect-modal-action",onClick:()=>{d()}},u.value?.cancel)])):null)}});export{$ as default};
//# sourceMappingURL=RedirectModal.js.map
