import{redirectMap as k}from"@temp/redirect/map.js";import{entries as M,isLinkHttp as S}from"@vuepress/helper/client";import{usePreferredLanguages as $}from"@vueuse/core";import{computed as x,watch as C,onMounted as D}from"vue";import{useRoute as E,useRouter as d,useRouteLocale as v,useRoutePath as j}from"vuepress/client";import{u as y,s as R}from"./useRedirectInfo-Bi8syic3.js";const z=/#.*$/u,A=(o,l=!1)=>(l?o.replace(z,""):o).replace(/\/(?:README\.md)?$/i,"/index.html").replace(/(?:\.(?:md|html))?$/,".html"),B=({autoLocale:o,config:l,defaultBehavior:r,defaultLocale:p,localeFallback:m})=>{const L=Object.entries(l),g=$(),e=E(),s=d(),P=v(),w=x(()=>P.value==="/"),b=()=>{const c=s.getRoutes(),u=p&&c.some(({path:a})=>a===e.path.replace("/",p))?p:c.find(({path:a})=>e.path.split("/").length>=3&&a===e.path.replace(/^\/[^/]+\//,"/"))?.path;let t=null;e:for(const a of g.value)for(const[i,f]of L)if(f.includes(a)){if(m&&c.every(({path:h})=>h!==e.path.replace("/",h)))continue;t=i;break e}const n=u?e.fullPath.replace("/",u):null;if(t){const a=c.some(({path:h})=>e.path.replace("/",t)===h),i=e.fullPath.replace("/",t),f=a?i:r==="homepage"?t:r==="defaultLocale"&&n?n:i;s.replace(f)}else n?s.replace(n):e.path!=="/404.html"&&s.replace("/404.html")};C(()=>e.path,c=>{for(const[u,t]of M(k))if(A(c.toLowerCase())===u.toLowerCase()){S(t)?window.open(t):s.replace(t);return}o&&w.value&&b()},{immediate:!0})},F=o=>{const l=y(o),r=v(),p=j(),m=d();D(()=>{l.value&&!R.value[r.value]&&(m.replace(p.value.replace(r.value,l.value.localePath)),R.value[r.value]=!0)})};export{F as a,B as s};
//# sourceMappingURL=setupRedirect-q886RMSd.js.map
